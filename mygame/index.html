<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>My NFT Game</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000000;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            font-weight: 600; /* Made text bolder overall */
        }
        
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #000000;
            border-bottom: 1px solid #333333;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background: #333333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: #888888;
        }
        
        .user-name {
            font-size: 16px;
            font-weight: 700; /* Bolder */
        }
        
        .currency-info {
            display: flex;
            align-items: center;
            gap: 4px; /* Reduced gap to move + closer */
        }
        
        .currency-item {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #1a1a1a;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700; /* Bolder */
        }
        
        .plus-btn {
            background: #ffffff; /* Changed blue to white */
            border: none;
            border-radius: 20px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000000; /* Changed to black for contrast */
            cursor: pointer;
            font-size: 16px;
        }
        
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            background: #000000;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
        }
        
        .center-area {
            text-align: center;
            padding: 60px 20px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #000000;
            margin-bottom: 80px; /* Increased further to move play button lower for easier clicking */
        }
        
        .center-logo {
            font-size: 120px;
            color: #333333;
            opacity: 0.6;
            font-weight: 200;
        }
        
        .center-message {
            font-size: 16px;
            color: #888888;
            margin-top: 20px;
        }
        
        .center-nft-img {
            width: 180px;
            height: 180px;
            border-radius: 16px;
            object-fit: cover;
            margin-bottom: 16px;
            border: 2px solid #333333;
        }
        
        .center-nft-name {
            font-size: 22px;
            font-weight: 700;
        }
        
        .center-nft-status {
            font-size: 16px;
            color: #888888;
            background: #1a1a1a;
            padding: 6px 12px;
            border-radius: 12px;
        }
        
        .play-btn {
            background: #ffffff; /* Changed green to white for theme */
            border: none;
            color: #000000; /* Black for contrast */
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .play-btn:hover {
            background: #eeeeee; /* Light gray hover */
        }
        
        .play-btn:disabled {
            background: #333333;
            color: #888888;
            cursor: not-allowed;
        }
        
        .bottom-nav {
            display: flex;
            background: #000000;
            border-top: 1px solid #333333;
        }
        
        .nav-item {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #: #888888888888;
            font;
            font-size-size: 12: 12px;
            displaypx;
            display: flex;
            flex: flex;
            flex-direction: column;
            align-direction: column;
            align-items: center;
           -items gap: center;
            gap: :4 4pxpx;
           ;
 transition            transition: color : color 0.2s ease0.2s ease;
;
               }
 }
        
        .        
        .nav-itemnav-item.active.active {
 {
                       color: color #: #ffffff;ffffff; /* Changed /* Changed blue to white blue to white */
        }
        
 */
        }
        .nav        
        .nav-item i-item i {
            {
            font font-size-size: 20px: 20px;
        }
;
        }
        
        .screen        
        .screen {
            display {
            display: none;
        }
: none;
        }
        
        .screen.active        
        .screen.active {
 {
                       display: block display: block;
        }
;
        }
        
        .section        
        .section-title {
            font-title {
            font-size: -size24: 24px;
px            font;
-weight            font-weight::  700;
700;
            margin            margin-bottom-bottom: 20: 20px;
           px color;
            color:: # #ffffffffffff;
        }
        }
        
        
        .nft        .nft-grid-grid {
            display {
            display:: grid grid;
            grid;
            grid-template-template-columns:-columns repeat(auto-fill: repeat(auto-fill,, minmax minmax((160160pxpx,,  11frfr));
));
                       gap gap::  1212pxpx;
;
               }
 }
        
        
        .       nft-card .nft-card {
            {
            background: background: # #11a1a1a1aa;
1            bordera;
            border-radius: 12-radius: 12pxpx;
;
                       padding padding:: 12px 12px;
;
            text-align: center;
 text-align: center            border;
            border:: 1px solid #333333;
        }
        
 1px solid        .nft-card-img {
            width: 100 #333333;
%;
            aspect-ratio:         }
        
        .nft1-card-img {
           ;
            border-radius width: 100%;
            aspect-ratio: 1;
           : 8px;
            object-fit: cover;
            margin-bottom: 8 border-radius: 8px;
            object-fit: cover;
            margin-bottom: 8pxpx;
;
        }
        
        }
        
               .nft .nft-card-name-card-name {
 {
            font            font-size: 14-size: 14pxpx;
;
            font            font-weight-weight: :700 700; /*; /* B Bolderolder */
            */
            margin margin-bottom-bottom:: 4px 4px;
       ;
        }
        
        }
        
        .nft .nft-card-price {
            font-size-size:: 12 12pxpx;
            color: #;
            color: #888888;
            margin888888;
            margin-bottom: 8-bottom: 8pxpx;
;
            font-weight            font-weight: 600: 600; /*; B /* Bolderolder */
        }
 */
        }
        
               
        .nft-card-btn .nft-card-btn {
 {
            background: #            background: #ffffff;ffffff; /* Changed /* Changed blue to white blue to white */
            border: */
            border: none none;
           ;
            color:: #000 #000000; /*000; /* Black Black for contrast for contrast */
            padding */
            padding: : 88pxpx 12px 12px;
           ;
            border-radius: 6-radius: 6pxpx;
            font;
            font-size: 12-size: 12px;
px;
            font            font-weight: 700-weight: 700;; /* /* B Bolder text for buttonsolder text for buttons */
            cursor */
            cursor: pointer: pointer;
           ;
 width: 100            width: 100%;
           %;
            margin-bottom: 4 margin-bottom: 4px;
        }
px;
        }
        
        .        
        .nft-card-btnnft-card-btn.secondary.secondary {
            background: {
            background: #333 #333333;
            color333;
            color:: #ffffff;
            margin #ffffff;
            margin-bottom-bottom: 0: 0;
        }
;
        }
        
        /* Battle        
        /* Battle styles */
        styles .battle */
        .battle-arena-arena {
            background {
:            background: url('https:// url('https://imgimg.fre.freepikepik.com.com/free-photo/free-photo/dark/dark-brown-brown-fabric-motion-fabric-motion-texture-background_-texture-background_133090090--81.jpg')81.jpg') no-repeat center center no-repeat center center / cover /;
            border cover;
            border-radius-radius:: 16 16pxpx;
            padding: ;
            padding: 2020px;
            margin:px;
            margin: 20px 20px  00;
           ;
 height           : height:  100100%;
        }
%;
        }
        
        .        
        .battlebattle-part-participantsicipants {
            display {
            display:: flex flex;
;
            justify-content:            justify-content: space-between;
 space-between;
            align            align-items:-items: center;
            center;
            margin margin-bottom: 24-bottom: 24pxpx;
        }
        
;
        .participant        }
        
        .participant {
 {
                       text text-align-align:: center center;
            flex;
            flex: 1;
        }
: 1;
        }
        
        
        .participant        .participant-img-img {
            {
            width width:: 100px 100px;
            height;
           : height: 100 100pxpx;
            border-radius:;
            border-radius: 12px 12px;
            object;
            object-fit: cover-fit: cover;
;
            margin-bottom:             margin-bottom: 1212px;
px;
            border: 2px solid #333            border: 2px solid #333333333;
        }
;
        }
        
        .shake        
        .shake {
            animation {
            animation: shake 0: shake 0..5s5s;
;
               }
        
        @ }
        
        @keyframes shakekeyframes shake {
 {
                       0 0%% { transform transform:: translate translate(0(0, 0);, 0); }
 }
                       25% { 25% { transform: translate transform(-: translate(-5px,5 0px,); }
            50 0); }
            50% {% { transform: translate transform: translate((5px5px, , 00);); }
            75 }
%            75% { transform { transform: translate(-5px: translate(-5px,, 0 0);); }
            100% { transform }
            100% { transform: translate: translate((0,0, 0); }
        0); }
        }
 }
        
        .participant        
        .participant-name {
           -name {
            font font-size-size: 16px: 16px;
           ;
            font font-weight:-weight:  600600;
;
            margin            margin-bottom:-bottom: 12 12pxpx;
       ;
 }
        }
        
               
        .hp .hp-container-container {
            background: # {
            background: #000000000000;
            border;
            border-radius-radius: 10: 10pxpx;
;
            padding:             padding: 44px;
            marginpx;
            margin-bottom: 8-bottom: 8pxpx;
        }
;
        
        .hp        }
        
        .hp-bar-bar {
            height {
            height: 12: 12px;
            background: #px;
            background: #dd32f232f2ff;
            border;
-radius           : border-radius:  66pxpx;
            transition;
            transition: width: width 0 0..8s8s ease ease;
;
            position            position: relative;
        }
: relative;
        }
        
               
        .hp .hp-bar.low-bar.low {
            {
            background: background: #ff #ff5725722;
           2;
            animation:: pulse 0 pulse 0..5s infinite5s infinite alternate;
        }
        
        @keyframes pulse {
            from alternate;
        }
        
        @keyframes pulse {
            from { opacity { opacity: 0: 0.7.; }
            to7; }
            to { opacity { opacity: 1:; 1; }
 }
        }
        }
        
        .        
       hp .hp-text-text {
            font {
            font-size: 14-size: 14pxpx;
            color: #cccccccccccc;
           ;
            font font-weight:-weight: 600 600;
;
        }
               
        }
        
 .        .vs-textvs-text {
            font {
            font-size:-size: 28 28pxpx;
;
                       font-weight: bold font-weight: bold;
;
                       color color: #: #666666666;
            margin;
: 0            margin: 0  20px20px;
        }
;
        }
        
        
               . .battlebattle-log-log {
 {
                       background background:: #000 #000000;
000;
                       border-radius border-radius::  12px;
           12px;
            padding padding::  1616px;
px           ;
            margin margin: : 2020px 0px 0;
            font;
            font-size:-size: 16 16px;
            colorpx;
            color: #cccccc:;
            min #cccccc;
            min-height: 80-height: 80px;
            border: px;
            border: 11px solid #333px solid #333333333;
            font;
            font-weight: 500-weight: 500;
        }
;
        }
        
        .        
        .battlebattle-result-result {
 {
                       text text-align-align:: center center;
;
            padding: 24px;
                       padding: 24px;
 font-size:            font-size: 24px;
            font-weight: 24px;
            font-weight: 700 700;
       ;
        }
 }
        
        .battle        
        .battle-result-result.win.win {
            color: # {
4            color: #4caf50;
        }
caf50;
        }
        
        
        .battle        .battle-result.l-result.loseose {
            color: {
            color: #f443 #f44336;
        }
36;
        }
        
        .reward-info        
        .reward-info {
            border:  {
            border: 11px solidpx solid # #3463462323ff;
            border;
            border-radius-radius: : 12px12px;
;
            padding: 16px            padding: 16px;
            margin:;
            margin:  1515pxpx 0 0;
;
            text-align            text-align:: center center;
            font-size: 16;
            font-size: 16pxpx;
       ;
        }
        
        .reward-info.win }
        
        .reward-info.win {
            background {
            background: #1a472: #1a472aa;
;
        }
        }
        
        
        .        .rewardreward-info-info.l.loseose {
            {
            background: background #: #44a1a1a1a1a;
a           ;
            border border-color: #623-color: #623f3f3ff;
        }
;
        }
        
        .profile        
        .profile-header {
-header            {
 display            display:: flex flex;
;
            align            align-items:-items: center center            gap;
            gap: 16: 16px;
            padding: px;
            padding: 20px;
20            backgroundpx;
            background: #1: #1a1a1a1aa1a;
           ;
            border-radius border: 16-radius: 16px;
            marginpx;
            margin-bottom:-bottom 20px: 20px;
        }
        
        .profile-avatar {
            width;
        }
        
        .profile-avatar {
            width: 80px: 80px;
            height;
            height: 80: 80pxpx;
            border-radius: ;
            border-radius: 4040pxpx;
            background:;
            background: # #333333333;
            display333;
            display: flex: flex;
            align;
            align-items-items:: center;
            justify center;
            justify-content-content:: center center;
;
                       font font-size-size: 32: px;
            color:32px;
            #888888 color: #888888;
        }
;
        }
        
        .        
        .profile-infoprofile-info h h22 {
            font {
            font-size:-size:  24px24px;
            font;
            font-weight: 700-weight: 700;
;
            margin            margin-bottom:-bottom 4: 4pxpx;
       ;
        }
 }
        
               
 .        .profileprofile-stats-stats {
 {
            font            font-size: 14-size: 14px;
           px;
            color: color: # #888888888888;
;
        }
        }
        
        .friends-placeholder        
        .friends-placeholder {
 {
            text text-align:-align center;
: center;
            padding            padding: 80: 80px 20px 20px;
px;
            color            color: #: #888888888888;
;
                       font font-size: 18-size: 18px;
       px }
;
        }
        
        
        .searching        .searching-overlay-overlay, .coin, .coin-t-tossoss-overlay-overlay {
 {
            position            position:: fixed;
            top: fixed;
            top: 0 ;
0;
            left            left: : 00;
           ;
            right right: 0;
           : 0;
            bottom bottom: : 00;
           ;
            background background: rgba: rgba((0,0 0, 0,,  00, ,0 0.9);
            display.9);
            display:: flex flex;
;
            flex-direction            flex-direction: column: column;
;
            justify-content            justify: center-content: center;
            align;
-items:            align-items center: center;
;
                       z z-index: 100-index: 10000;
       ;
        }
        
 }
        .search        
        .searchinging-animation-animation {
            width            width: 60: 60pxpx;
            height;
:            height: 60 px;
px;
                       border border: 3: 3px solid #333px solid333 #333333;
            border-top:;
             border-top: 33pxpx solid # solid #ffffff;ffffff; /* Changed /* Changed blue blue to to white white */
            */
 border            border-radius: 50-radius: 50%;
            animation%;
            animation: spin: spin  1s1s linear infinite linear infinite;
            margin;
            margin-bottom-bottom:20: 20pxpx;
        }
;
        }
        
        .coin        
       -container .coin-container {
 {
            perspective            perspective:: 100 10000px;
;
            margin            margin-bottom-bottom:: 20 20pxpx;
;
        }
        }
        
               
 .coin        .coin {
 {
            width            width: 150: 150pxpx;
            height: ;
            height: 150px150px;
            position;
            position:: relative relative;
            transform;
            transform-style: preserve-style: preserve-3-3dd;
            transition;
            transition:: transform transform 0. 30.3s;
        }
s;
        }
        
        
        .front        .front,, .back .back {
            {
            position:: absolute absolute;
;
            width            width: 100%;
            height: 100%;
            height::  100%;
100            back%;
            backface-visibilityface-visibility: hidden;
           : hidden border;
            border-radius-radius::  5050%;
%;
            overflow            overflow:: hidden hidden;
;
            background            background: #333: #333333;
            box333;
            box-shadow:-shadow: 0 0 0 0 20 20px rgbapx rgba(255(255,255,255,255,255,,0.20.2);
);
        }
        }
        
               
        . .backback {
 {
            transform            transform: rotate: rotateYY(180(180deg);
        }
        
       deg);
        }
        
        .coin .coin img img {
            {
            width: 100 width: 100%;
%;
                       height: height:  100100%;
%;
            object            object-fit: cover-fit: cover;
;
        }
        
        @        }
        
        @keyframes flipkeyframes flipFrontFront {
 {
                        00%% { { transform transform:: rotate rotateYY((00degdeg);); }
 }
                        100% {100% { transform transform: rotateY(1800deg); }
        }
        
        @keyframes flip: rotateY(1800deg); }
        }
        
        @keyframes flipBackBack {
            0 {
            0%% { transform: rotate { transform: rotateYY(0deg);(0deg); }
            100 }
            100% { transform:% { transform: rotateY(198 rotateY(19800deg);deg); }
        }
 }
        }
        
               
        @ @keyframes spinkeyframes spin {
 {
                       0% { 0% { transform: rotate( transform: rotate(0deg);0deg); }
            100% { transform }
            100% { transform:: rotate rotate((360360degdeg); }
        }
); }
        }
        
               
        .searching .searching-text {
            font-text {
            font-size: 18-size: 18pxpx;
            color: #;
            color: #cccccccccccc;
           ;
            text text-align-align:: center center;
;
               }
        
        .back }
        
        .back-btn {
            background-btn {
            background: #333333: #333333;
            border;
            border:: none;
            color none;
            color: white;
: white;
            padding            padding:: 12px 20 12px 20pxpx;
           ;
 border-radius            border-radius: 8px: 8px;
            font;
           -size font-size: :16px 16px;
            cursor:;
            cursor: pointer pointer;
            margin;
            margin-top-top::  20px20px;
;
        }
        
        .        }
fade        
        .fade-in {
            animation-in {
            animation: fadeIn: fadeIn 0 0..3s ease3s ease;
        }
;
        }
        
        @keyframes fade        
        @keyframes fadeInIn {
            from {
            from { { opacity opacity:: 0 ; transform0; transform: translate: translateY(10Y(10pxpx); }
); }
            to            to { opacity { opacity: 1: 1; transform; transform:: translateY( translateY(00);); }
 }
               }

        }

        /* Purchase Menu /* Purchase Menu Styles */
        .purchase Styles */
        .purchase-overlay-overlay {
            position {
            position: fixed;
            top: fixed;
            top: 0;
            left: 0;
            left:: 0;
            right 0;
            right: : 00;
            bottom;
            bottom: :0 0;
           ;
 background            background: rgba: rgba((0, 0, 0,0, 0 0, , 0.90.9);
            display);
            display:: flex flex;
           ;
            flex flex-direction-direction: column: column;
            justify-content: center;
            justify-content: center;
            align;
-items           : align-items: center;
            z center;
            z-index: 100-index: 10000;
;
                       display: display none: none;
       ;
 }

               }

        . .purchasepurchase-content-content {
            background {
           : background: # #1a11a1a1a1a;
a            border-radius;
            border-radius: 16: 16px;
px            padding;
:            padding: 20px;
            width 20px;
            width: 80: 80%;
            max-width%;
            max-width: : 300300pxpx;
            text;
            text-align:-align: center center;
;
        }

        }

               .purchase .purchase-title-title {
            font {
            font-size-size: 20px: 20px;
            font-weight:;
            font-weight: 700;
            margin 700;
            margin-bottom: 20px-bottom: 20px;
        }

;
        }

        .        .purchase-options {
            displaypurchase-options {
            display:: flex flex;
;
            flex           -direction flex-direction:: column column;
            gap;
            gap: 10: 10px;
px        }

;
        }

        .purchase-btn        .purchase-btn {
            background: #ffffff {
            background: #ffffff;
            color: #000;
            color: #000000000;
            padding;
            padding: 12: 12px;
            border-radiuspx;
            border-radius: 8px: 8px;
            font-size: 16px;
            font-size: 16px;
            font-weight: ;
            font-weight: 700;
700;
            cursor            cursor: pointer;
            border: pointer;
            border:: none none;
       ;
 }

               .close }

        .close-p-purchaseurchase {
            margin            margin-top:-top : 20px20px;
            color: #888888;
            color: #888888;
            cursor;
            cursor: pointer: pointer;
       ;
        }
 }
        
        .participant        
        .participant.left ..left .participant-imgparticipant-img {
 {
            width            width: 150: 150px;
            height:;
            150 height: 150px;
        }
px;
        }
        
               
 .       participant ..rightparticipant.right .participant .participant-img-img {
            width {
            width: : 200px200px;
;
            height           : height: 200 200pxpx;
;
        }
        }
        
        .        
        .participant.leftparticipant.left .hp .-containerhp-container {
 {
            width            width:: 150 150pxpx;
        }
;
        }
        
        
        .participant.right        .participant.right .hp-container .hp-container {
 {
                       width:  width: 200200pxpx;
        }
   ;
        }
    </stylestyle>
</head>
</head>
<body>
<body>
    <div class>
    <div class="app-container">
        <!--="app-container">
        <!-- Top Bar Top Bar -->
        <div -->
       =" <div class="top-bar">
            <divtop-bar">
            <div class class="user="user-info-info">
">
                <div class                <div class="user="user-avatar" id-avatar" id="="useruser-avatar">-avatar">👤</👤</divdiv>
                <div>
                <div class class="user="user-name-name"" id id="user-name="user-name">">ИИгрок</divгрок</div>
>
                       </div>
            </div <div>
            <div class="currency class="currency-info-info">
                <div class">
                <div class="currency-item="currency-item">
">
                                        <i<i class=" classfas fa-star="fas fa-star"" style="color style="color: #: #ffdffd700700;"></i;"></i>
                    <span id=">
                    <span id="starstar-count-count">0">0</</spanspan>
                </>
div                </div>
                <button>
                <button class=" classplus="plus-btn-btn"" onclick onclick="show="showPurchaseMenuPurchaseMenu()">+</()">+</buttonbutton>
           >
            </divdiv>
        </div>
        </div>

       >

 <!--        Content Area <!-- Content Area -->
 -->
        <div class="        <div class="contentcontent-area">
            <!---area">
            <!-- Main Main Screen Screen -->
             -->
            <div id<div id="="mainmain-screen"-screen" class=" class="screen activescreen active">
               ">
                 <div<div class=" class="main-content">
                    <divmain-content">
                    <div id=" id="centercenter-area-area" class"="center class="center-area">
                        <div id="-area">
                       center-content <div id="center-content"></div>
                    </"></div>
                    </divdiv>
>
                    <button class="play                    <button class="play-btn"-btn" id="play id-button="play-button" onclick" onclick="start="startBattleSearchBattleSearch()">Б()">БИТВАИТВА</button</button>
                </div>
                </div>
            </div>
            </div>

           >

 <!--            <!-- Collection Collection Screen Screen -->
 -->
                        <div<div id id="="collectioncollection-screen" class="screen-screen">
                " class<div class="="screen">
                <div class="mainmain-content">
-content">
                                       <h <h22 class=" classsection="section-title-title">Кол">Коллекциялек</hция</h22>
                   >
                    <div id <div id="="collection-gridcollection-grid"" class class="nftnft-grid-grid"></"></divdiv>
                   >
                     <button<button class="play class="play-btn" onclick-btn" onclick="open="openShopShop()"()" style="margin-top style="margin-top: 20:px 20px;">
                        Куп;">
                        Купитьить NFT NFT
                    </
                    </buttonbutton>
                </div>
                </div>
            </div>
            </div>

            <!-- Shop>

            <!-- Shop Screen Screen -->
            <div id -->
            <div id="shop-screen="shop-screen" class="" class="screenscreen">
               ">
                 <div class<div class="main="main-content-content">
">
                                       <h2 class="section <h2 class="section-title">М-title">Магазин NFTагазин NFT</</h2h2>
                    <div id>
                    <div id="="shop-grid"shop class="-grid" class="nftnft-grid-grid"></div"></div>
               >
                </ </divdiv>
>
            </div            </div>

            <!-- Battle>

            <!-- Battle Screen Screen -->
            -->
            <div id=" <div id="battlebattle-screen" class-screen" class="="screen">
                <divscreen">
                <div class=" class="main-contentmain-content">
                    <div class="battle">
                    <div class="battle-ar-arenaena">
">
                                                <div class<div class="battle="battle-part-participants">
icipants                            <div">
                            <div class="participant class="participant left left">
                               ">
                                <img id="player <img id="player-img" class-img" class="participant="participant-img"-img" src src=""="" alt alt="Player="Player NFT NFT">
">
                                <div class                               ="participant <div class="participant-name-name">Вы">Вы</div</div>
>
                                                               <div  class="hp<div class="hp-container-container">
                                    <div id">
                                    <div id="player-h="player-hp-bar" classp-bar" class="hp-bar"></div="hp-bar"></div>
                               >
                                </div </div>
                                <div id="player-hp-text>
                                <div id="player-hp-text"" class="hp class="hp-text-text">">100100/100 HP/100 HP</div</div>
                            </div>
                           >
                            </div>
                             <div<div class="vs class="vs-text">-text">VS</divVS</div>
>
                                                       <div class="participant <div class="participant right right">
">
                                                               <img<img id id="="botbot-img-img" class" class="participant="participant-img" src-img" src=""="" alt alt="Bot="Bot NFT NFT">
">
                                <div                                <div class="participant class="participant-name-name">С">Сопоперникерник</div>
                                </div>
                                <div class="hp-container">
                                    <div id<div class="hp-container">
                                    <div id="bot="bot-h-hpp-bar"-bar" class class="hp="-barhp-bar"></div"></div>
>
                                </div                                </div>
                                >
                                <div id="bot<div id="bot-hp-hp-text"-text" class=" class="hphp-text">100-text">100//100100 HP HP</div</div>
>
                            </ </divdiv>
                       >
                        </div </div>
                        <div>
                        <div id="battle-log" class="battle id="battle-log" class-log="">battle-log">ПодготовПодготовка кка к битве...</ битве...</divdiv>
>
                                                <div id<div="battle id="battle-result-result"" class="battle class="battle-result-result"" style style="display:=" none;"></divdisplay: none;"></div>
                        >
<div id                        <div id="="rewardreward-info-info" class="reward" class="reward-info-info" style="display" style="display: none;"></div: none;"></div>
                        <button id>
                        <button id="back-to-menu="back-to-menu-btn"-btn class="back" class="back-btn" onclick-btn" onclick="="backbackToToMainFromMainFromBattle()" styleBattle()" style="display:="display: none; width none; width: 100: 100%;">
%;">
                            Вернуться                            Вернуться в меню в меню
                        </
                       button </button>
                    </>
                    </div>
div>
                </                </divdiv>
>
                       </div </div>

            <!-- Profile>

            <!-- Profile Screen Screen -->
 -->
                        <div<div id id="="profile-screen" class="profile-screen" class="screenscreen">
">
                <div                class <div class="="mainmain-content-content">
                    ">
                    <div<div class class="="profileprofile-header-header">
                        <div">
                         class="<div classprofile="profile-avatar-avatar"" id=" id="profileprofile-avatar-avatar">">👤👤</div</div>
                       >
 <div class="profile                        <div class="profile-info">
                            <h-info">
                            <h2 id="profile2 id="profile-name-name">И">Игрок</hгрок</h2>
                            2>
                            <div class<div class="profile-stats="profile-stats">
                                <div>N">
                                <div>NFTFT в коллек в коллекции: ции: <span<span id id="profile="profile-n-nft-countft-count">0">0</span></</span></div>
                                <div>div>
                                <div>ЗвЗвёёзд заработзд заработано: ано: <span<span id=" idprofile="profile-stars-stars-ear-earnedned">">00</span</></spandiv></div>
                           >
 </                            </divdiv>
                       >
 </div                        </div>
                    </div>
                    </div>
                   >
                    <h <h33 class class="section="section-title-title" style="" style="fontfont-size-size: : 1818px;">px;">ММоя коллекция</hоя коллекция</h33>
                    <div id="profile>
                    <div id="profile-collection"-collection class=""nft class="nft-grid"></div-grid"></div>
>
                </div>
                </div>
            </div            </div>

            <!-->

 Friends            <!-- Friends Screen -->
             Screen<div -->
            <div id=" id="friendsfriends-screen-screen" class" class="="screenscreen">
                ">
<div class               =" <div class="mainmain-content-content">
                   ">
                    <div <div class class="="friendsfriends-placeholder-placeholder">
                        <h">
                        <h2>Hello2>Hello World</h2>
                        <p World</h2>
                        <p style="margin-top:  style="margin-top: 20px20; colorpx; color: #666;">: #666;">РазРаздел в в разработ разработке</кеp</p>
                   >
                    </div </div>
               >
 </               div </div>
           >
 </div </div>

            <!-- Upgrade>

            <!-- Upgrade Screen Screen -->
 -->
            <div id="upgrade            <div id="upgrade-screen" class="screen-screen" class="screen">
                <div class="">
                <div class="main-contentmain-content">
                    <h">
                    <h2 class="section2 class="section-title">А-title">Апгрейд</пгрейд</hh22>
                   >
 <div                    <div class="friends class="friends-placeholder-placeholder">
                        <p style">
                        <p style="="marginmargin-top: -top: 2020px; colorpx; color:: #666;"> #666;">РазРаздел в в разработ разработке</pке</p>
                    </div>
                </>
                    </div>
                </div>
div>
            </            </divdiv>
        </>
        </divdiv>

        <!-->

        <!-- Bottom Navigation Bottom Navigation -->
        <div class -->
="        <div class="bottom-navbottom-nav">
">
                        <button<button class class="="navnav-item-item active active" onclick" onclick="switch="switchScreenScreen('('main')main">
               ') ">
<i                <i class class="="fas fa-homefas fa-home"></i"></i>
>
                <span                <span>Главная>Главная</span>
            </button</span>
            </button>
>
                        <button<button class class="nav="nav-item" onclick-item" onclick="="switchswitchScreen('collection('collection')')">
               ">
                 <i<i class class="="fas fafas fa-box-box-open-open"></"></ii>
               >
                <span >Кол<span>Коллеклекцияция</span</span>
            </button>
            >
<button            </button>
            <button class="nav class="nav-item" onclick-item" onclick="switchScreen="switchScreen('upgrade('upgrade')">
')">
                                <i<i class="="fas fa-arrowfas fa-arrow-up"></i-up"></i>
                <span>А>
                <span>Аппгрейд</грейspanд</span>
            </button>
            </button>
           >
 <button            <button class=" class="navnav-item" onclick-item" onclick="switchScreen="switchScreen('profile('profile')')">
                ">
<i                class <i class="="fasfas fa-user"></i fa-user"></i>
                <span>>
                <span>ПрофильПрофиль</span</span>
            </button>
            <button>
            </button>
            <button class="nav class="nav-item" onclick="-item" onclick="switchScreenswitchScreen('('friends')">
                <ifriends')">
                <i class="fas fa-users"></i>
                <span>Д classрузья</span>
            </button="fas>
 fa-users       "></i>
 </                <span>Друзья</span>
            </button>
        </divdiv>

        <!-->

        <!-- Searching Overlay Searching Overlay -->
        <div id -->
        <div id="="searchsearching-overlay" classing-overlay" class="searching-overlay"="searching-overlay" style style="display:="display: none none;">
            <div class;">
            <div class="search="searching-animationing-animation"></div"></div>
           >
             <div<div class=" class="searching-textsearching-text">
                По">
                Поиск сопериск соперника...ника...<br<br>
                <span>
                <span id id="search="search-status-status">Под">Подключение кключение к серверу</span>
            </div>
        </div серверу</span>
            </div>
        </div>

        <!-->

        <!-- Coin Coin Toss Overlay Toss Overlay -->
        <div id -->
        <div id="="coincoin-toss-overlay-toss-overlay" class" class="coin-t="coin-toss-overlay"oss-overlay" style="display: style="display: none none;">
            ;">
            <div class="coin<div class="coin-container-container">
                <div id">
                <div id="coin="" class="coincoin" class="coin">
">
                    <div class="                    <div class="frontfront">
">
                                                <img<img id id="coin="coin-front"-front" src src="" alt="="" alt="Player">
                    </Player">
                    </divdiv>
                    <div class>
                    <div class="="backback">
">
                        <img id="coin-back" src="" alt                        ="<img id="coin-back" src=""Bot">
 alt="Bot">
                    </div                    </div>
               >
                </ </div>
            </div>
            </divdiv>
            <div id>
            <div id="coin="coin-result-text-result-text" class" class="search="searching-text"></diving-text"></div>
>
               </div </div>

        <!-->

        <!-- Purchase Purchase Overlay Overlay -->
        <div id -->
        <div id="purchase="purchase-overlay-overlay"" class class="purchase="purchase-overlay">
            <div-overlay">
            <div class class="="purchasepurchase-content-content">
">
                <div class="purchase                <div class="purchase-title">Куп-title">Купить звить звёзёзды</divды</div>
>
                <div class="purchase                <div class="purchase-options">
-options                   ">
                    <button <button class=" class="purchasepurchase-btn" onclick-btn" onclick="purchaseStars="purchaseStars((5050)">50 зв)">50 звёзд</buttonёзд</button>
                    <button class>
                    <button class="="purchasepurchase-btn" onclick-btn" onclick="="purchaseStarspurchaseStars(100)">(100)">100 звёзд</100 звёзд</buttonbutton>
                   >
                    <button class <button class="="purchase-btn"purchase-btn" onclick="purchaseStars onclick="purchaseStars((200)">200)">200 зв200 звёзд</buttonёзд</button>
                   >
 <button class="                    <button class="purchase-btnpurchase-btn" onclick" onclick="purchaseStars(500="purchaseStars(500)">500 зв)">500 звёзд</buttonёзд</button>
                    <button>
                     class<button=" class="purchase-btnpurchase-btn" onclick" onclick="="purchaseStarsStars(1000)">(1000)">1000 зв1000 звёзд</buttonёзд</button>
>
                    <button                    class ="purchase<button class="purchase-btn"-btn"=" onclickpurchase="purchaseStars(Stars(2000)">2002000)">20000 зв звёёздзд</</buttonbutton>
>
                    <button class="                    <button class="purchase-btn" onclickpurchase-btn" onclick="purchaseStars(500="purchaseStars(5000)">5000)">5000 зв0 звёзд</buttonёзд</button>
>
                               </ </divdiv>
>
                <div                 class<div="close class="close-purchase"-p onclickurchase" onclick="closePurchaseMenu="closePurchaseMenu()">()">ЗакЗакрыть</рытьdiv</div>
>
            </div           >
 </div>
        </        </div>
>
       </div </div>

   >

     <script>
<script>
               Telegram Telegram.WebApp.WebApp.ready.ready();

        const cloud();

        const cloudStorage = TelegramStorage = Telegram.Web.WebApp.CloudApp.CloudStorageStorage;

       ;

 //        // Рас Расшиширенныйренный список NFT список NFT подар подарков (14ков (14 штук штук)
)
        const        nft const nftTemplates = [
            { nameTemplates = [
            { name: 'К: 'Календарь', imgалендарь', img:: ' 'https://https://raw.githubusercontentraw.githubusercontent.com.com/y/yourusernameourusername/y/yourrepo/mainourrepo/main/calendar/calendar.gif.gif',', tier: 'basic tier: 'basic'' },
            { },
            { name: name: ' 'Doge PopDoge Pop',', img img:: 'https 'https://raw.githubusercontent.com/y://raw.githubusercontent.com/yourourusername/yourusernamerepo/main/yourrepo/main/d/doge.gif',oge.gif', tier: 'basic tier: 'basic'' },
            },
 { name:            { name: 'Pe 'Pepe', img: 'pe', img: 'httpshttps://raw://.githubusercontent.comraw/y.githubusercontent.com/yourourusernameusername/y/yourrepoourrepo/main/main/pe/pepepe.gif.gif',', tier: 'basic tier: 'basic' },
            { name:' },
            { name: 'L 'oli PopLoli Pop', img: 'https', img: 'https://://i.getgi.getgems.io/Uems.io/Uh4_vh4_vqGzqGzSw4Sw4MKMKwPwwPwYEsEsWIWI2i2i6R6R44t44t8A8A7bj7bjly1Ely1E4K4K6IgM6/rsIgM/rs:fill:500:fill:500:500:500:1/g:1/g::cece/cz/cM6zM6Ly9Lyn9nZXRnZXRnZWZW11zLXMzLXMzL25mdC1zL25mdC1jb250ZWjb250ZW50LW50LWNhYNhY2hlL2hlL2ltYW2ltYWdlcydlcy99FUUMFUUM2em2emppZDppZDhh2Sk2Sk5FV5FV33FjFjWGsxWGsxMFMFhqchqc2RE2RETFJTFJLYmLYmNQNQWnWnpiSHpiSHVzdVzdUVXNUVXNkZkZva09va09XXSWSW00vYzvYzY2YWY2YWYY55MMDRmDRmODODg1Nmg1NmEE5O5QOQ', tier', tier: ': 'premiumpremium'' },
            { },
            { name: 'З name: 'Звёздный Квёздный Кот', img:от', img: 'https://raw.githubusercontent.com 'https://raw.githubusercontent.com/your/yourusernameusername/your/yrepoourrepo/main/main/st/starcarcatat.gif',.gif', tier: ' tier: 'basic' },
            {basic' },
            { name: 'Р name: 'Рададужнаяужная П Пандаанда', img:', img: 'https 'https://raw.githubusercontent.com://raw.githubusercontent.com/your/yourusernameusername/yourrepo/yourrepo/main/r/mainainbow/rainbow-p-pandaanda.gif.gif',', tier: ' tier: 'basicbasic'' },
            },
 { name:            { name: 'Кос 'Космимический Хческий Хомомякяк',', img: ' img: 'https://httpsraw.githubusercontent.com://raw.githubusercontent.com/y/yourourusernameusername/your/yourreporepo/main/main/space/space-h-hamamsterster.gif.gif',', tier: tier: ' 'basicbasic'' },
 },
            { name:            { name: 'Не 'Неоновыйоновый Дракон', Дракон', img: ' img: 'httpshttps://raw.githubusercontent://.com/yraw.githubusercontent.com/yourourusername/yourusernamerepo/main/yourrepo/main/ne/neonon-dragon.gif',-dragon.gif', tier tier:: 'basic 'basic'' },
            { name: },
            { name: 'К 'Кристальный Еристальный Единорогдинорог',', img: img: 'https '://rawhttps.githubusercontent.com://raw.githubusercontent.com/yourusername/yourusername/your/yrepoourrepo/main/main/cr/crystal-ystal-unicornunicorn.gif', tier.gif', tier: 'basic': 'basic' },
 },
                       { name: ' { name: 'ОгОгненненный Фный Феникс', imgеникс', img:: ' 'https://raw.githubusercontenthttps://raw.githubusercontent.com.com/y/yourourusername/yourusername/yourrepo/mainrepo/main/fire/fire-ph-phoenixoenix.gif',.gif', tier: ' tier: 'premium'premium' },
            },
            { name { name: ': 'ЛЛедяной Воледяной Волк', img:к', img: 'https://raw.githubusercontent.com 'https://raw.githubusercontent.com/yourusername/your/yourusername/yourreporepo/main//main/iceice-w-wolfolf.gif.gif',', tier tier: ':basic 'basic'' },
 },
            { name            {: name: ' 'ЗЗолотаяолот Рыая Рыббка',ка', img: img: 'https 'https://raw://raw.githubusercontent.githubusercontent.com.com/your/yusernameourusername/yourrepo/yourrepo/main/g/main/golden-folden-fishish.gif',.gif', tier: 'basic tier: 'basic'' },
            { },
            { name: name: ' 'ММагический Кагический Кристалристаллл', img:', img: 'https:// 'raw.githubusercontent.comhttps://raw.githubusercontent.com/yourusername/yourrepo/yourusername/yourrepo/main/magic/main/magic-crystal.gif',-crystal.gif', tier: ' tier: 'premium' },
            { namepremium' },
            { name: 'Л: 'Летающий Кетающий Кит', imgит', img:: ' 'httpshttps://://rawraw.githubusercontent.githubusercontent.com.com/y/yourourusernameusername/yourrepo/yourrepo/main/main/f/flyinglying-wh-whale.gifale.gif',', tier tier:: 'premium 'premium'' }
        ];
 }
        ];
        
        
               const nft constPrices nft = Prices = [100[100,, 150 150,,  200200, 250, 80, 250, 80,,  9090,,  7070,,  85,85, 95 95,, 200, 75 200, 75, 60, 60,,  220220, 240, 240];

];

        //        // Инициализация Инициализация

               let stars let stars = 100 = 100;
        let collection;
        let collection = = [];
 [];
        let        active let activeBattleBattleNft = nullNft = null;
        let;
        total totalStarsEarned = StarsEarned = 00;
;
        
        // Telegram        
        // Telegram user data user data
       
        const const tg tgUser = TelegramUser = Telegram.Web.WebApp.initApp.initDataUnsafeDataUnsafe?.user?.user;
;
               let user let userName = tgName = tgUser?.firstUser?.first_name || 'И_name || 'Игрок';
        let userгрок';
        let userAvatarAvatar = tg = tgUser?.Userphoto?.photo_url |_url || '| 'httpshttps://://ii.getgems.getgems.io.io/U/Uh4_vh4_vqGzqGzSw4Sw4MKMKwwPwPwYYEsEsWI2iWI2i6R6R44t44t8A8A7bj7bjly1Ely1E4K6Ig4K6IgM/rsM/rs::fill:500fill:500:500:500:1:1/g/g::cece/cz/cM6zM6LyLy9n9nZZXRnXRnZW1ZW1zzLLXMXMzzL25L25mdC1mdC1jb250ZW50jb250ZW50LWLWNhNhYY2hlL2hlL2ltYW2ltYWdlcydlcy99FUUMFUUM22ememppZDppZDh2Skh2Sk5FV5FV3Fj3FjWWGsGsxxMFMFhqchqc2RE2RETFJTFJLYmNQLYmNQWnWnpiSHpiSHVzdVzdUVUVXNXNkZkZva09va09XXSW0SW0vYzvYzYY22YWYWYY5M5MDRmDRmODODg1g1NmNmEE5O5OQQ';
';
        
        // Battle        
        // Battle variables
        let variables
        let playerHP player =HP =  100100;
        let bot;
        let botHP = 100;
        let botNft = null;
        let battleHP = 100;
        let botNft = null;
        let battleInProgress = falseInProgress = false;
       ;
        let current let currentScreen = 'mainScreen = 'main';

        init';

        init();

        async();

        async function function init() init() {
            await {
            await load loadData();
            updateData();
            updateUI();
            renderUI();
            renderCenterAreaCenterArea();
            render();
            renderCollection();
            renderCollection();
            renderShopShop();
           ();
            renderProfile renderProfile();
            update();
            updateUserInfo();
        }

UserInfo();
               async }

        function loadData async function load()Data {
           () {
            try {
 try                {
                const [starsStr, collection const [starsStr, collectionStrStr,, active activeNftStrNftStr,, total totalEarnedEarnedStr]Str] = await = await Promise Promise.all.all([
                    getCloud([
                    getCloudItem('starsItem('stars'),
                    getCloud'),
                    getCloudItem('collectionItem('collection'),
                   '),
                    getCloud getCloudItem('activeItem('activeBattleBattleNftNft'),
'),
                    get                    getCloudItem('CloudtotalItem('totalStarsEarnedStarsEarned')
')
                               ]);
 ]);
                stars                stars = parseInt(st = parseInt(starsarsStrStr) || 100) || 100;
                collection;
                collection = JSON JSON.parse(collectionStr.parse(collectionStr)) | || [];
                activeBattleNft| [];
                activeBattleNft = JSON = JSON.parse(active.parse(activeNftStrNftStr) || null) || null;
                total;
                totalStarsStarsEarned = parseEarned = parseInt(totalInt(totalEarnedEarnedStrStr) || 0) || 0;
;
                       } } catch (error) catch (error) {
                console {
.error                console('.errorError('Error loading loading data data:',:', error);
            }
        error);
            }
        }

        async }

        async function saveData() function saveData() {
            try {
                await {
            try {
                await Promise Promise.all([
                    set.all([
                    setCloudItemCloudItem('stars('stars', stars', stars.to.toStringString()),
                    set()),
                   Cloud setCloudItem('Itemcollection('collection', JSON', JSON.stringify.stringify(collection(collection)),
                    setCloud)),
                    setCloudItem('activeItem('activeBattleNft',BattleNft', JSON JSON.stringify(active.stringify(activeBattleNftBattleNft)),
)),
                                       setCloud setCloudItem('totalItem('totalStarsEarned',StarsEarned', total totalStarsStarsEarned.toEarned.toStringString())
               ())
                ]);
 ]);
                       } } catch catch ( (error)error) {
 {
                console.error('Error saving                console.error('Error saving data:', data:', error error);
);
            }
                   }
        }

 }

               function getCloudItem(key function getCloudItem(key) {
) {
            return            return new Promise((resolve, new reject Promise((resolve, reject) =>) => {
 {
                               cloud cloudStorage.getItemStorage.getItem(key, (, (error,error value, value)) => => {
                    if {
                    if (error) reject (error) reject(error);
                    else(error);
                    else resolve(value resolve(value);
                });
           );
                });
            });
        }

        function });
        }

        function setCloud setCloudItemItem(key(key, value) {
            return, value) {
            return new new Promise((resolve, reject Promise((resolve, reject) => {
                cloud) => {
                cloudStorageStorage.setItem(key,.setItem(key value, value, (error, (error, success, success)) => => {
                    if ( {
                    if (error |error || !success)| !success) reject(error);
 reject                    else(error);
                    else resolve();
                });
 resolve();
                });
                       });
        });
 }

        function        }

        function update updateUserUserInfo()Info() {
 {
            document.getElementBy            document.getElementById('userId-name('user').text-nameContent'). =textContent = userName;
            document.get userElementNameById('profile;
           -name document.getElementById').text('Content = userprofile-nameName;
').            
textContent =            userName;
            
            if if ( (useruserAvatarAvatar)) {
                {
 document.getElementById('user-avatar').                document.getElementById('user-avatar').innerHTML = `inner<img srcHTML="${ =user `Avatar<img}" style src="width:100%;="${userAvatar}" style="width:100%;height:100%;height:100%;border-radius:50border-radius:50%;object%;object-fit:cover-fit:cover;">;">`;
               `;
                document document.get.getElementElementByById('Id('profile-avatarprofile-avatar').').innerinnerHTML = `HTML = `<img<img src="${userAvatar src="${userAvatar}"}" style=" style="widthwidth:100%;:100%;height:100%;height:100%;borderborder-radius-radius::5050%;%;objectobject-fit:cover-fit:cover;">;">`;
            }
`;
            }
               }

        function update }

        function updateUI()UI() {
            document            document.get.getElementById('starElementById('star-count').text-count').textContent = starsContent = stars;
;
            document.get            document.getElementByElementById('profileId('profile-nft-nft-count-count').').texttextContent =Content collection = collection.length.length;
            document;
            document.get.getElementElementByById('profileId('profile-stars-ear-stars-earnedned').').texttextContent =Content total = totalStarsEarnedStarsEarned;
            updatePlay;
            updatePlayButtonButton();
            save();
            saveData();
        }

       Data();
 function        }

        function updatePlay updatePlayButtonButton()() {
 {
                       const play const playBtn =Btn document.get = document.getElementByElementByIdId('play-button('play-button');
            if');
            if (!activeBattle (!activeBattleNft) {
                playBtnNft) {
                playBtn.textContent = 'Вы.textContent = 'Выберите NFTберите NFT для для бит битвывы';
                playBtn.disabled';
                playBtn.disabled = true = true;
           ;
            } } else if ( elsestars if (stars  < < 10)10) {
                {
                playBtn.text playBtn.textContentContent = 'Н = 'Недостатедочно звостаточно звёзд (ёзд (10 зв10 звёёздзд)';
)';
                playBtn.disabled                playBtn.disabled = true;
            } = true;
            } else else {
                {
                play playBtn.textContentBtn.textContent = ' = 'БИТВА (БИТВА (1010 зв звёёзд)';
зд               )';
 play                playBtnBtn.disabled.disabled = false = false;
            }
       ;
            }
        }

        function showPurchase }

        function showPurchaseMenuMenu() {
            document.getElementById('()purchase-overlay'). {
            document.getElementById('purchase-overlay').style.display =style.display = 'flex';
 'flex';
        }

        function        close }

        function closePurchaseMenuPurchaseMenu()() {
 {
                       document document.get.getElementElementById('purchase-overlayById('purchase-overlay').').style.display =style.display = 'none';
        }

        'none';
        }

        function purchaseStars(amount function purchaseStars(amount)) {
            {
            stars stars += += amount;
            amount;
            total totalStarsEarnStarsEarned += amounted += amount;
;
            updateUI();
                       alert updateUI();
            alert(`Куп(`Купленолено ${amount} зв ${amount} звёзд! (ёзд! (ТестТест)`);
            close)`);
            closePurchaseMenuPurchaseMenu();
       ();
        }

        }

        function start function startBattleSearch()BattleSearch() {
            {
            if (! if (!activeBattleactiveBattleNft || starsNft || stars < 10) return < 10) return;
            
            stars;
            
            stars -=  -= 1010;
            updateUI;
            updateUI();
();
            
            
                       // П // Показываем overlayоказываем overlay поиска поиска
            document
            document.getElement.getElementById('searchById('searchinging-overlay').style-overlay.display').style.display = 'flex = 'flex';
            
            const';
            
            const searchStatuses = searchStatuses = [
                ' [
Под                'Подключение к серверключение к серверу...у...',
                'По',
                'Поиск игрокиск игроковов......',
',
                               'П 'Проверкароверка совмест совместимости...имости...',
',
 'С                'Сопероперникник найден найден!'
!'
                       ];
 ];
            
                       
            let let statusIndex = 0 statusIndex = 0;
            const statusElement;
            const statusElement = = document document.get.getElementElementByIdById('search('search-status-status');
');
            
            
            const update            const updateStatusStatus = = () => () => {
                if {
 (                ifstatus (statusIndex Index < search< searchStatuses.lengthStatuses.length)) {
                    {
                    statusElement statusElement.text.textContentContent = search = searchStatusesStatuses[statusIndex[statusIndex];
];
                    statusIndex                    statusIndex++;
++;
                                       if (statusIndex  if (statusIndex < searchStatuses.length< searchStatuses.length) {
                        set) {
                        setTimeout(updateStatusTimeout(updateStatus, 800, 800);
);
                    }                    } else else {
                        {
 setTimeout                        setTimeout(start(startBattleBattle, 500, 500);
);
                                       }
                }
                }
            };
            
            update }
Status();
                   };
 }

        function            
            startBattle() {
            update // СкрываемStatus();
        overlay поиска            document.getElementById(' }

        function startBattle() {
            // Скрываем overlay поиска
            document.getElementById('searchsearchinging-overlay-overlay').style').style.display.display = = ' 'nonenone';
';
            
            // Подбира            
            // Подбираемем сопер соперника по ценника по ценовой категорииовой категории
            const
            const player playerPricePrice = active = activeBattleNftBattleNft.buy.buyPrice;
            letPrice;
            let suitable suitableNfts =Nfts = [];
 [];
            
            // На            
            // Находим подходяходим подходящих соперщих соперников (ников (аналоганичалогичная илиная или меньшая цена меньшая цена)
            nft)
            nftTemplates.forTemplates.forEach((templateEach((template, index, index)) => => {
                if ( {
                if (nftPricesnft[index]Prices[index] <= player <= playerPricePrice + 50 + 50) {) { // // + +50 для50 для некотор некоторого разнообразого разнообразия
ия
                    suitable                    suitableNfts.push({Nfts.push({ ...template ...template, price, price: nft: nftPrices[index]Prices[index] });
                }
            });
                }
            });
 });
            
            // Если            
            // Если нет нет подходящих подходящих, бере, беремм любого любого
            if (s
            if (suitableNuitableNftsfts.length ===.length === 0 ) {
0) {
                const                const randomIndex randomIndex = Math = Math.floor(Math.floor(Math.random() * nft.random() * nftTemplatesTemplates.length.length);
                bot);
                botNft = {Nft = { ... ...nftTemplatesnftTemplates[random[randomIndex], priceIndex], price: nftPrices: nftPrices[randomIndex][randomIndex] };
 };
                       } } else else {
                {
 const random                const randomIndexIndex = = Math Math.floor.floor(Math.random(Math.random() * suitable() * suitableNfts.lengthNfts.length);
);
                botNft                botNft = suitable = suitableNfts[randomNfts[randomIndexIndex];
           ];
            }
            
                       
            // Пере // Переходим к битходим к битвеве
            document
            document.query.querySelectorAllSelectorAll('.screen('.screen').forEach').forEach(s => s(s s.class.classListList.remove('.remove('activeactive'));
            document'));
            document.get.getElementById('battleElementById('battle-screen').class-screen').classList.add('active');
            
           List // П.add('оказываем монactive');
            
            // Показываем монететку
            documentку
            document.getElement.getElementById('coinById('coin-toss-overlay-toss-overlay').style.display =').style.display = ' 'flex';
flex           ';
            document document.getElementBy.getElementByIdId('('coincoin-front-front').').src =src = userAvatar userAvatar;
;
            document.getElementBy document.getElementById('Idcoin('coin-back').src-back').src = bot = botNftNft.img.img;
            document;
            document.getElementBy.getIdElement('coinById('coin-result-text-result-text').').texttextContentContent = = '';
            const coin '';
            const coin = document =.get documentElement.getByElementIdById('coin('coin');
            coin.style            coin.style.animation = 'none.animation = 'none';'; // // Reset Reset animation animation
            
            set
            
            setTimeoutTimeout(()(() => {
 =>                const {
                const playerFirst playerFirst = = Math.random Math.random() () < 0< 0.5.5;
               ;
                const animation const animationNameName = playerFirst = playerFirst ? 'flip ? 'flipFrontFront' :' : ' 'flipflipBack';
Back';
                coin                coin.style.animation.style.animation = = `${ `${animationanimationNameName} } 33s eases ease-out-out forwards forwards`;
                
`;
                
                               coin coin.addEventListener('animation.addEventListener('animationendend', ()', () => => {
                    const text {
                    const text = player = playerFirst ?First ? 'Вы 'Вы ход ходитеите первым первым!'!' : : 'П 'Противник ходротивник ходит первымит первым!';
                   !';
                    document document.getElement.getElementById('coinById('coin-result-result-text-text').text').textContent = textContent = text;
                    
;
                    
                    setTimeout(() =>                    setTimeout(() => {
 {
                        document                       .getElementBy document.getElementById('coinId('coin-toss-overlay-toss-overlay').').style.displaystyle.display = = ' 'nonenone';
                        initialize';
                        initializeBattleBattle(player(playerFirst);
                    },First);
                    },  20020000);
                },);
                }, { {onceonce: true});
            },: true});
            },  10010000);
);
        }

        }

               function function initialize initializeBattleBattle(player(playerFirstFirst) {
)            player {
            playerHP = 100HP = 100;
           ;
            bot botHP =HP = 100 100;
            battleInProgress;
            battleInProgress = true = true;
;
            
                       
 document           .getElementById document.getElementById('player-img('player-img').').srcsrc = = activeBattleNft activeBattleNft.img.img;
            document;
            document.getElementById('.getElementById('botbot-img').src-img').src = bot = botNftNft.img.img;
;
            
                       
            // // Hide Hide battle result battle result elements elements
            document
            document.get.getElementElementByByIdId('('battlebattle-result').-resultstyle').style.display.display = ' = 'nonenone';
            document';
            document.get.getElementByElementById('Id('rewardreward-info').style-info').style.display = 'none.display = 'none';
            document.getElementBy';
Id('            document.getElementById('back-toback-to-menu-menu-btn').-btnstyle')..displaystyle.display = ' = 'nonenone';
';
            
                       // Get elements // Get elements to animate to animate
           
            const vs const vsText =Text document.query = document.querySelectorSelector('.('.vsvs-text-text');
');
                       const const player playerHpHpContainerContainer = document.query = document.querySelectorSelector('.participant('.participant.left.left .hp .hp-container');
            const bot-container');
            const botHpContainerHpContainer = = document document.querySelector('.participant.querySelector('.participant.right ..righthp .hp-container');
            const player-container');
            const playerHpText = documentHpText = document.get.getElementElementByById('playerId('player-h-hpp-text-text');
            const botHp');
            const botHpText = documentText = document.get.getElementByElementByIdId('bot('bot-h-hpp-text-text');
            const playerName =');
            const player documentName = document.querySelector('.participant.querySelector('.participant.left .participant-name.left .participant-name');
            const');
 bot            const botNameName = document.querySelector = document.querySelector('.participant('.participant.right.right .participant-name .participant-name');
            const player');
            const playerParticipantParticipant = document =.query document.querySelector('.participantSelector('.participant.left');
.left');
                       const const bot botParticipant = document.queryParticipant = document.querySelector('.participantSelector('.participant.right.right');
            
            // Initial');
            
            // Initial hide hide
            vs
            vsText.styleText.style.opacity.opacity = =  0;
            playerHp0;
            playerHpContainer.styleContainer.style.opacity =.opacity 0 = 0;
            bot;
            botHpContainer.styleHpContainer.style.opacity.opacity = = 0 0;
            playerHp;
Text           .style playerHpText.style.opacity.opacity = =  00;
;
            botHpText.style           .opacity botHpText.style.opacity = =  0;
            player0;
            playerName.style.opacityName.style.opacity = = 0;
            bot 0;
            botName.styleName.style.opacity.opacity = 0 = 0;
           ;
            playerParticipant.style.opacity playerParticipant.style.opacity = = 0;
            0 player;
            playerParticipantParticipant.style.transform =.style.transform = 'translate 'translateXX(-100vw(-100vw)';
            bot)';
            botParticipant.style.opacityParticipant.style.opacity = = 0;
            bot 0;
            botParticipant.styleParticipant.style.transform = '.transform = 'translateX(100vwtranslateX(100vw)';
)';
            
                       
 // Pop            // Pop in gifts in gifts

            set            setTimeoutTimeout(()(() => {
                player => {
                playerParticipantParticipant.style.transition.style.transition = 'transform = 'transform  11ss ease ease, opacity, opacity  11ss ease ease';
                botParticipant.style';
                botParticipant.style.transition =.transition = 'transform 'transform 1 1s eases ease, opacity, opacity  1s ease1s ease';
                playerParticipant';
                playerParticipant.style.transform.style.transform = 'translate = 'translateX(0X(0)';
                               playerParticipantParticipant.style.opacity = 1.style.opacity = 1;
               ;
 bot                botParticipantParticipant.style.transform.style.transform = ' = 'translatetranslateXX((00)';
                botParticipant)';
                botParticipant.style.opacity.style.opacity = =  1;
            },1;
            }, 100 100);
);
            
                       
            // // After After pop pop in + in + 2 sec hold 2 sec hold, transition to depth transition to depth
            setTimeout(()
            setTimeout(() => => {
                {
 bot                botParticipant.styleParticipant.transition.style.transition = 'transform  = 'transform 00.5s ease.5s ease';
                botParticipant';
                botParticipant.style.style.transform =.transform ' =scale( 'scale(1.1.2) translate2) translateY(-40Y(-40pxpx)';
            },)';
            }, 210 21000);
            
            // 0.5 sec after);
            
            // 0.5 sec after depth, depth, fade in VS fade in VS
           
            set setTimeoutTimeout(() =>(() => {
 {
                vs                vsText.styleText.style.transition.transition = 'opacity  = 'opacity 00..55ss ease ease';
';
                               vs vsText.style.opacityText.style.opacity = 1 = 1;
;
                vs                vsText.classText.classList.add('Listfade-in.add('fade-in');
            },');
            }, 2100 + 500 2100 + 500);
            
);
            //             
            // 00.5 sec.5 sec after VS after VS, fade, fade in HP in HP
            set
            setTimeoutTimeout(()(() => => {
                player {
                playerHpContainer.style.transitionHpContainer.style.transition = = 'opacity  'opacity 00.5s ease.5s ease';
';
                bot                botContainer.styleContainer.style.transition.transition = 'opacity = 'opacity 0 .0.55ss ease ease';
                playerHp';
                playerHpContainer.styleContainer.style.opacity = 1.opacity = 1;
                botHp;
                botHpContainer.style.opacityContainer.style.opacity = 1 = 1;
                playerHp;
                playerHpText.styleText.style.transition = '.transition = 'opacityopacity 0 0.5s ease.5s ease';
';
                               botHpText.style botHpText.style.transition.transition = 'opacity = 'opacity 0 0..5s5 eases ease';
                playerHp';
                playerHpText.style.opacity = Text1.style.opacity = ;
                botHp1;
                botTextHpText.style.opacity.style.opacity =1 = 1;
;
                updateHP                updateHPBarsBars();
            },();
            }, 2100 210 +0 +  500500 +  + 500500);
);
            
            
            // 0.            // 0.5 sec5 after sec after HP, HP, fade fade in in names names ( (avatars)
avatars)
                       set setTimeoutTimeout(() => {
                playerName(() => {
                playerName.style.transition.style.transition = 'opacity = ' opacity 0.5s0 ease.5s ease';
                bot';
                botNameName.style.transition.style.transition = ' = 'opacityopacity  00.5s ease.5s ease';
                player';
                playerName.style.opacityName.style.opacity = 1 = 1;
               ;
                botName botName.style.style.opacity.opacity = 1 = 1;
            },;
            }, 2100 + 2100 +  500500 + + 500 500 +  +500 500);
            
);
            
                       // Start // Start battle logic battle logic
           
            setTimeout setTimeout(()(() => => {
 {
                const log                const log = = document document.get.getElementByIdElementById('battle('battle-log');
               -log if (player');
                if (playerFirstFirst) {
                   ) {
 log.text                    log.textContentContent = 'Вы = 'Вы атаку атакуете первыми! Приете первымиготов!ьтесь Приготовьтесь......';
                    setTimeout';
                    setTimeout(()(() => perform => performAttack(trueAttack),(true),  20002000);
);
                               } } else else {
                    {
 log                    log.text.textContent = 'СContent = 'Соперник атакоперник атакует первым!ует первым! За Защищищщайтесь...айтесь';
                    set...';
                    setTimeoutTimeout(() => perform(() => performAttack(false),Attack(false), 2000 2000);
                }
);
                }
            },             }, 21021000 + + 500 500 + + 500 + 500 +  500 +500 +  500500);
);
               }

 }

        function        function performAttack(is performAttack(isPlayerTurnPlayerTurn) {
)            if (! {
            if (!battleInbattleInProgress) returnProgress) return;
;
            
            let            
            let damage damage;
           ;
 isLow            const isLowHPHP = (is =Player (isPlayerTurnTurn ? bot ? botHP :HP : player playerHP) <=HP) <= 25 25;
;
                       const const is isCriticalCritical = = Math.random Math.random() < (is() < (isLowHP ?LowHP ? 0.3 0.3 : :  00..1515);
            
            if (isCritical);
            
            if (isCritical)) {
                damage = {
                damage = Math.floor(Math Math.floor.random() *(Math.random() *  30) +30) + 45 45;
            };
            } else else {
                damage = Math {
                damage = Math.floor.floor(Math.random()(Math.random() *  * 3535) +) 8 + 8;
           ;
 }
            }
            
            const isMiss            
            const isMiss = Math = Math.random() < .random() < 0.08;
            const0.08;
            const log log = document = document.get.getElementElementByById('battleId('battle-log-log');
            let');
            let targetImg targetImg;
            
            if (isPlayer;
            
            if (isPlayerTurn) {
Turn                target) {
                targetImg = documentImg = document.getElementById('bot.getElementById('bot-img-img');
');
            } else {
                targetImg            } else {
                targetImg = document.getElementById = document.getElementById('player('player-img');
            }
-img');
            }
            
            if (is            
            if (isMiss)Miss) {
                if ( {
                if (isPlayerTurnisPlayerTurn) {
)                    log {
                    log.text.textContentContent = = ' 'ППромахромах!! Ваша Ваша а ататака нека не поп попала вала в цель цель!';
                } else {
                    log.text!';
                } else {
                    log.textContent = 'УContent = 'Уклонкениелонение! Вы! Вы изб избежали атакиежали атаки соперника!';
                }
 соперника!';
                }
            }            } else {
                if else {
                if (isPlayer (TurnisPlayerTurn)) {
 {
                    bot                    botHP =HP = Math.max(0, bot Math.max(0, botHP -HP - damage damage);
                    if);
                    if (is (isCriticalCritical)) {
 {
                        log.text                        log.textContent = `КContent = `КРИТИЧЕРИТИЧЕСКИСКИЙЙ У УДАДАР!Р! Вы на Вы наносите ${damageносите ${damage} уро} урона соперна соперникунику!`;
                    }`;
                    } else {
                        log else {
                        log.text.textContentContent = `Вы = `Вы на наносноситеите ${ ${damage} уроdamage} уронана сопер сопернику!`;
нику!`;
                    }
                                   }
                } else {
                    player } else {
                    playerHP =HP = Math.max(0 Math.max(0, player, playerHP -HP damage - damage);
                   );
 if                    if (isCritical) (isCritical) {
                        log.text {
                        log.textContent = `КContent = `КРИТИЧЕРИТИЧЕСКАСКАЯ АЯ АТАКА СОТАКА СОППЕРНИКАЕРНИКА!! Вы получа Вы получаете ${ете ${damage} уроdamage} уронана!!`;
                    }`;
                    } else else {
                        log.text {
                        log.textContent = `СContent = `Соперникопер наник наноситносит вам вам ${ ${damagedamage}} уро уронана!`;
                    }
!               `;
                    }
                }
                // }
                // Add shake Add shake animation animation
                target
                targetImg.classListImg.classList.add('shake.add('shake');
                set');
                setTimeoutTimeout(() => target(() => targetImg.classImg.classList.remove('List.removeshake('shake'), 500'), 500);
            }
);
            }
            
            update            
            updateHPBarsHPBars();
            
           ();
 if ((player            
            if ((playerHP <= HP <=15 15 || bot || botHPHP <= <=  1515) && player) && playerHP > HP > 00 && botHP && botHP > > 0) 0) {
                {
 setTimeout(() =>                setTimeout(() => {
 {
                    log                   .text log.textContentContent = 'К = 'Критиритическоеческое состояние! состояние! Следующий След ударующий удар может быть может быть реша решающимющим!';
!';
                }, 100                }, 10000);
            }
);
            }
            
            
            if            (playerHP if (playerHP <= 0 | <= 0| bot || botHPHP <= 0) {
                <= 0) {
                setTimeout setTimeout(()(() => end => endBattle(),Battle(), 200 20000);
);
            }            } else else {
                const delay                const delay = Math = Math.random() * 100.random() * 1000 +0 +  15015000;
                setTimeout;
                setTimeout(() => performAttack(() => performAttack(!(!isPlayerTurnisPlayerTurn),), delay delay);
            }
       );
            }
        }

        function update }

        function updateHPBars()HPBars() {
 {
            const player            const playerBarBar = = document document.get.getElementByElementByIdId('player-h('player-hpp-bar-bar');
');
                       const const bot botBarBar = document =.get documentElement.getByIdElementById('bot-h('bot-hpp-bar');
            const-bar');
            const player playerTextText = document.getElementById = document.getElementById('('playerplayer-h-hp-text');
p-text');
            const            const bot botText = documentText = document.getElement.getElementById('botById('bot-h-hp-textp-text');
            
            playerBar');
            
            playerBar.style.style.width = `${.width = `${playerHP}%playerHP}%`;
           `;
            bot botBar.styleBar.style.width = `${.width = `${botbotHP}%HP}%`;
`;
            
            
            if (            if (playerHPplayerHP <= 20 <= 20) playerBar) playerBar.classList.add('.classList.add('low');
            elselow');
            else playerBar.classList.remove playerBar.classList.remove('low('low');
            
            if');
            
            if ( (botHPbotHP <= <= 20) bot 20) botBar.classBar.classList.add('lowList.add('low');
            else');
            else botBar botBar.classList.remove('.classList.removelow('low');
            
           ');
 playerText.text            
            playerText.textContent = `${Content = `${playerHP}/playerHP}/100 HP100 HP`;
`;
                       botText.text botText.textContent = `${Content = `${botbotHPHP}/}/100 HP100 HP`;
        }

        function end`;
        }

        function endBattleBattle() {
            battle() {
            battleInProgressInProgress = false = false;
            const result;
            const resultDiv = document.getElementDiv =By document.getElementById('battleId('battle-result-result');
            const');
            const reward rewardDiv = documentDiv = document.getElement.getByElementId('ByrewardId('reward-info-info');
            const log');
            const log = document.get = document.getElementByIdElementById('battle('battle-log-log');
');
            
                       
 if            ( ifplayer (playerHP >HP  > 00)) {
                resultDiv {
                resultDiv.text.textContentContent = ' =ПО 'ПОБЕДАБЕДА!';
                resultDiv!';
                resultDiv.className.className = 'battle = 'battle-result win-result win';
';
                               log log.text.textContent = 'НContent = 'Невероятная побевероятная победа!еда! Вы оказались Вы оказались сильнее сильнее!';
                
                const!';
                
                const reward rewardNft = {Nft = { ... ...botNftbotNft, buy, buyPrice: botPrice: botNftNft.price.price };
 };
                collection.push(re                collection.push(rewardwardNft);
               Nft reward);
                rewardDiv.innerDiv.innerHTML = `ВыHTML = `Вы получили NFT получили NFT: ${: ${botNft.name}!botNft.name}!`;
                reward`;
                rewardDiv.classDiv.classList.add('List.add('winwin');
                rewardDiv');
                rewardDiv.classList.remove.classList.remove('lose('lose');
');
            }            } else else {
 {
                result                resultDiv.textContentDiv.textContent = 'ПО = 'ПОРАРАЖЖЕЕНИЕНИЕ!';
                resultDiv!';
                resultDiv.class.classNameName = = 'battle 'battle-result lose-result lose';
               ';
                log log.text.textContentContent = = 'Вы 'Вы потер потерппелиели по поражение...ражение...';
                
                if';
                
                if (activeBattle (activeBattleNftNft) {
                    collection) {
                    collection = collection = collection.filter.filter(n(nftft => => 
                        
                        nft nft.name.name !== active !== activeBattleNft.nameBattleNft.name || nft.img || nft.img !== !== active activeBattleBattleNft.imgNft.img
                   
                    );
 );
                                       activeBattleNft = activeBattleNft = null null;
                    rewardDiv.inner;
                    rewardDiv.innerHTML = `ВHTML = `Вашаш NFT захвачен против NFT захвачен противником!`;
                    rewardником!`;
                    rewardDiv.classDiv.classList.addList.add('('loselose');
                    reward');
                    rewardDivDiv.class.classList.remove('winList.remove('win');
                }
           ');
                }
            }
            
 }
                       
 result            resultDiv.styleDiv.style.display = 'block.display = 'block';
            reward';
            rewardDiv.style.displayDiv =.style.display = ' 'block';
block            document';
            document.get.getElementById('backElementById('back-to-menu-to-menu-btn').-btn').style.displaystyle.display = = 'block 'block';
           ';
            updateUI updateUI();
        }

        function back();
        }

        function backToMainFromBattleToMainFromBattle() {
            document() {
            document.querySelectorAll.query('.SelectorAll('.screenscreen').for').forEachEach(s => s(s =>.class s.classListList.remove('active.remove('active'));
            document'));
            document.getElementById('main.getElementById('main-screen').-screen').classList.addclassList.add('active('active');
            
            // Об');
            
            // Обновляем нановляем навигавигацию
цию
            document            document.querySelectorAll('.nav.querySelectorAll('.nav-item').forEach(item-item').forEach(item => item.class => item.classList.remove('activeList.remove('active'));
            document'));
            document.querySelectorAll('..querySelectorAll('.nav-item')nav-item')[0].class[0].classListList.add.add('active('active');
            
            update');
            
            updateUI();
           UI render();
            renderCenterAreaCenterArea();
();
            currentScreen = '            currentScreen = 'main';
        }

        functionmain';
        }

        function switchScreen(screen) switchScreen(screen) {
            document {
.query            document.querySelectorAll('.navSelectorAll('.nav-item-item').forEach(item').forEach(item => item.class => item.classList.remove('activeList.remove('active'));
           '));
            event event.target.closest.target.closest('.nav-item('.nav-item').class').classList.addList.add('active('active');
            
           ');
 document.query            
            document.querySelectorSelectorAllAll('.screen('.screen').').forforEach(sEach(s => s => s.class.classListList.remove('.removeactiveactive'));
'));
            
            if (screen            
            if (screen === ' === 'mainmain')') {
 {
                               document.getElement document.getElementByIdById('main('main-screen-screen').classList.add').('classList.add('active');
                renderactive');
                renderCenterAreaCenterArea();
            } else if();
            } else if (screen === (screen === 'collection 'collection')') {
                {
 document                document.getElement.getElementByById('collectionId('collection-screen').class-screen').classListList.add('active.add('active');
                render');
                renderCollectionCollection();
            } else if();
            } else if (screen (screen === 'upgrade === 'upgrade') {
               ') {
                document.get document.getElementById('upgradeElementById('upgrade-screen').-screen').classclassList.add.add('active('active');
           ');
 }            } else else if (screen if (screen === ' === 'profileprofile')') {
                document.get {
                documentElement.getElementById('profile-screenById('profile-screen').').classclassListList.add('active.add('active');
                render');
                renderProfile();
           Profile }();
            } else else if (screen if (screen === 'friends === 'friends')') {
                document.getElement {
                document.getElementByIdById('friends-screen('friends-screen').classList.add').classList.add('('activeactive');
            }
');
            }
            
            currentScreen            
            currentScreen = screen = screen;
        }

        function open;
        }

        function openShop()Shop() {
 {
            document.get            document.getElementElementByById('collectionId('collection-screen').class-screen').classList.removeList.remove('active('active');
            document.getElement');
            document.getElementByByIdId('shop('shop-screen').-screen').classListclass.add('activeList.add('active');
');
            render            renderShopShop();
();
        }

               function }

        function backTo backCollectionToCollection() {
() {
            document.getElement document.getElementByByIdId('shop-screen('shop-screen').class').classListList.remove.remove('active('active');
');
                       document.get document.getElementByElementById('Id('collectioncollection-screen').class-screen').classList.add('activeList.add('active');
        }

        function');
        }

        function renderCenterArea() renderCenterArea() {
            const center {
            const centerDiv = documentDiv = document.getElement.getElementById('centerById('center-content');
            center-content');
            centerDiv.innerHTML =Div.innerHTML = '';
            if (activeBattle '';
            if (activeBattleNftNft) {
                center) {
                centerDivDiv.innerHTML =.innerHTML = `
                     `
<img src                    <img="${ src="${activeBattleactiveBattleNft.imgNft.img}" class}" class="center-n="center-nft-imgft-img" alt" alt="${active="${activeBattleNft.nameBattleNft.name}">
}">
                                       <div class <div class="center="center-nft-name-nft-name">${active">${activeBattleNft.nameBattleNft.name}</div>
                    <div}</div>
                    <div class="center class="center-nft-status-nft-status">Г">Готов к битотов к битве</divве</div>
                `;
           >
                `;
            } } else {
 else {
                center                centerDivDiv.innerHTML =.innerHTML = '<div class="center '<div class="center-logo">//-logo">//</div></div><div<div class="center class="center-message">-message">У вас не выбранУ вас не выбран NFT NFT для ду для дуэли,эли, выб его выберите в его в коллек коллекции</divции</div>';
            }
>';
            }
               }

 }

        function renderCollection        function renderCollection()() {
            const grid {
            const grid = = document.getElementById document.getElementById('('collectioncollection-grid-grid');
           ');
 grid            grid.innerHTML =.innerHTML = '';
 '';
            
            if            
            if (collection.length (collection.length ===  === 0)0) {
                {
                grid grid.inner.innerHTML =HTML = '<div style '<div style="="gridgrid-column-column: 1: 1/-1; text/-1; text-align: center-align: center; padding; padding: 40: 40px;px; color color: #888: #888888;">Кол888;">Коллеклекция пуция пуста<brста<br>>Купитеите NFT NFT в в магазине</div магазине</div>';
>';
                       } else {
                collection } else {
                collection.forEach((nft.forEach((nft, index, index)) => {
                    const is => {
                    const isActive = activeActive = activeBattleBattleNft && activeNft && activeBattleNftBattleNft.name.name === nft === nft.name.name && && activeBattle activeBattleNft.imgNft.img === === nft.img nft.img;
                    const;
                    const card card = document.create = document.createElementElement('('div');
                    carddiv');
                    card.className.className = ' =nft 'nft-card-card';
                    card';
                    card.innerHTML =.innerHTML = `
                         `
                        <img src src="${nft.img="${nft.img}" class}" class="="nft-cardnft-card-img"-img" alt alt="${nft="${nft.name.name}">
                       }">
                        <div class="nft <div class="nft-card-name">${-card-name">${nft.namenft.name} ${} ${isActive ?isActive ? ' '⚔⚔️' : ''️' : ''}</}</divdiv>
                       >
                        <div <div class="nft class="nft-card-price">-card-price">КупленоКуплено за ${nft за ${nft.buy.buyPrice} звPrice} звёзд</divёзд</div>
                        >
<button                        <button class="nft class="nft-card-btn"-card-btn" onclick="set onclick="setToBattleToBattle(${(${index})" ${index})" ${isActive ?isActive ? 'disabled 'disabled' : ''' : ''}>
                            ${}>
                            ${isActiveis ? 'Active ? 'В битВ битвеве'' : : 'В 'В бит битвуву'}
                        </'}
                        </buttonbutton>
                       >
                        <button class ="nft<button class="nft-card-btn secondary-card-btn secondary" onclick="" onclick="sellsellNftNft(${(${index})index})">
                            Прод">
                            Продать ${ать ${Math.floor(nMath.floor(nft.buyft.buyPrice * Price * 0.0.8)} зв8)} звёздёзд

                                               </button </button>
                    `;
>
                    `;
                    grid.append                    grid.appendChild(cardChild(card);
);
                });
                           });
            }
        }
        }

 }

        function render        function renderShopShop()() {
            const grid {
            const grid = document.get = document.getElementByIdElementById('shop('shop-grid-grid');
            grid.inner');
            grid.innerHTMLHTML = = '';
            
            nft '';
            
            nftTemplatesTemplates.for.forEach((Eachtemplate((template, index index)) => {
                const => {
                const price price = nftPrices = nftPrices[index[index];
                const card];
                const card = document.create =Element documentdiv.createElement('div');
                card.class');
                card.classNameName = 'nft = 'nft-card';
                card.inner-card';
                card.innerHTML =HTML = `
                     `
                   <img src="${template <img src="${template.img}" class.img}" class="-card="nft-card-img" alt-img" alt="${template.name="${template.name}">
                   }">
                    <div class="nft <div class="nft-card-name">${-card-name">${template.nametemplate.name}</div>
                    <div}</div>
                    <div class="nft class="nft-card-price">${-card-price">${priceprice}} звёзд звёзд</div</div>
>
                                       <button <button class="nft class="nft-card-btn-card-btn"" onclick=" onclick="buyNft(${buyNft(${indexindex}, ${price}, ${price})})" ${" ${starsstars  < price< price ? ' ? 'disabled' : ''' : ''}>
                        ${}>
                        ${stars stars < price< price ? ' ? 'НедНостаточноедостаточно зв звёзд'ёзд' : 'Куп : 'Купитьить'}
                    </'}
button                    </button>
                `;
>
                `;
                grid.append                grid.appendChild(card);
           Child(card);
            });
 });
               }

 }

        function        function renderProfile renderProfile()() {
            const grid = {
            const grid = document document.getElement.getElementById('ById('profile-collectionprofile-collection');
            grid.inner');
            grid.innerHTML =HTML = '';
 '';
            
            if            
            if (collection (collection.length === 0.length === 0) {
               ) {
 grid.inner                grid.innerHTMLHTML = = '<div style '<div style="="grid-column: 1grid-column: 1/-1; text/-1; text-align:-align: center; center; padding: 40 padding: 40pxpx;; color color: #888: #888888;">888;">У вас покаУ вас пока нет NFT нет NFT</</divdiv>';
            } else>';
 {
                           collection } else {
                collection.for.forEachEach((((nftnft) => {
                    const) => {
                    const isActive isActive = active = activeBattleNft && activeBattleBattleNft && activeBattleNft.nameNft.name === === nft nft.name && activeBattleNft.img.name && activeBattleNft.img === nft === nft.img;
.img;
                    const                    const card = document.createElement(' card = document.createElement('div');
                    carddiv');
                    card.className.class = 'nftName = 'nft-card-card';
                    card';
                    card.innerHTML =.innerHTML = `
 `
                                               <img src="${ <img src="${nft.imgnft.img}" class}" class="nft="nft-card-card-img-img" alt" alt="${nft="${nft.name.name}">
                       }">
                        <div <div class="nft class="nft-card-name">${-card-name">${nft.namenft.name} ${} ${isActive ?isActive ? ' '⚔⚔️' : ''}</️' : ''}</divdiv>
                        <div>
                        <div class="nft-card class="nft-card-price">Сто-price">Стоимость:имость: ${nft ${nft.buyPrice} зв.buyPrice} звёёзд</divзд</>
                   div `;
>
                    `;
                    grid                    grid.append.appendChild(cardChild(card);
                });
           );
                });
            }
        }

 }
        }

               function function buy buyNftNft(template(templateIndex, priceIndex, price)) {
            if {
            if (stars (stars >= >= price price)) {
 {
                               stars stars -= price -= price;
                const nft = {;
 ...                const nft = { ...nftTemplatesnftTemplates[templateIndex],[templateIndex], buy buyPricePrice: price: price };
                collection };
                collection.push.push(nft(nft);
);
                updateUI();
                updateUI               ();
                alert alert(`Куп(`Куплен ${nftлен ${nft.name}!.name}!`);
               `);
                render renderShop();
           Shop();
            } } else else {
                {
                alert('Н alert('Недостаточноед звостаточно звёздёзд!');
           !');
            }
 }
               }

 }

               function function sell sellNftNft(index(index)) {
 {
            const nft            const nft = collection = collection[index[index];
            const];
 sellPrice = const sellPrice = Math.floor(n Math.floor(nft.buyft.buyPrice *Price * 0 .80.8);
            stars += sell);
            stars += sellPricePrice;
;
            
            if            
            if (activeBattle (activeBattleNft && activeNft && activeBattleNftBattleNft.name.name === nft === nft.name.name && && activeBattle activeBattleNft.imgNft.img === nft === nft.img).img) {
                {
                activeBattleNft = active nullBattleNft = null;
;
            }
            }
            
            
                       collection collection.splice(index, .splice(index, 11);
);
            update            updateUI();
UI            render();
            renderCollectionCollection();
();
            render            renderCenterAreaCenterArea();
            alert(`П();
            alert(`Продродан заан за ${sell ${sellPrice} звPrice} звёздёзд!`);
        }

!`);
        }

        function setTo        function setToBattleBattle(index(index)) {
 {
            active            activeBattleNft = collection[index];
            renderBattleNft = collection[index];
            renderCollectionCollection();
();
                       render renderCenterAreaCenterArea();
            update();
            updateUI();
           UI alert();
            alert(`NFT(`NFT ${active ${activeBattleNft.nameBattleNft.name} готов} готов к к бит битве!ве!`);
        }
    </`);
        }
    </scriptscript>
</body>
</body>
>
</</htmlhtml>
```>